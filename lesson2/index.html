<!DOCTYPE>
<html>
<head>
</head>

<body>
  <canvas id="myCanvas" width="500" height="500"></canvas>
  <script>
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var image = new Image();
    image.onload = function(){
      ctx.drawImage(image,0,0);
      greyscale()
    }
    image.src = "fry.jpg";

    function greyscale(){
      var imageData = ctx.getImageData(0,0,500,500);
      var numPixels = imageData.data.length /4;
      for (i = 0; i < numPixels; i++){
        if (numPixels > 0){
          var red = imageData.data[4*i+1] * 0.3;
          var green = imageData.data[4*i+2] * 0.59;
          var blue = imageData.data[4*i+3] * 0.11;
          var grey = red + green + blue;

          imageData.data[i*4+0] = grey;
          imageData.data[i*4+1] = grey;
          imageData.data[i*4+2] = grey;
          imageData.data[i*4+3] = grey;
          // imageData.data[i*4+4] = grey;

          }
        }
      ctx.putImageData(imageData,0,0)
    }

  </script>

</body>
</html>
